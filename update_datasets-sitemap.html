<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Generate a datasets sitemap.xml for ODIS crawling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="update_datasets-sitemap_files/libs/clipboard/clipboard.min.js"></script>
<script src="update_datasets-sitemap_files/libs/quarto-html/quarto.js"></script>
<script src="update_datasets-sitemap_files/libs/quarto-html/popper.min.js"></script>
<script src="update_datasets-sitemap_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="update_datasets-sitemap_files/libs/quarto-html/anchor.min.js"></script>
<link href="update_datasets-sitemap_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="update_datasets-sitemap_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="update_datasets-sitemap_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="update_datasets-sitemap_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="update_datasets-sitemap_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="update_datasets-sitemap_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="update_datasets-sitemap_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="update_datasets-sitemap_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="update_datasets-sitemap_files/libs/datatables-binding-0.33/datatables.js"></script>
<script src="update_datasets-sitemap_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="update_datasets-sitemap_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="update_datasets-sitemap_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="update_datasets-sitemap_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="update_datasets-sitemap_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="update_datasets-sitemap_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#read-googlesheet-of-repos" id="toc-read-googlesheet-of-repos" class="nav-link active" data-scroll-target="#read-googlesheet-of-repos"><span class="header-section-number">1</span> Read GoogleSheet of repos</a></li>
  <li><a href="#issues" id="toc-issues" class="nav-link" data-scroll-target="#issues"><span class="header-section-number">2</span> Issues</a></li>
  <li><a href="#fetch-datasets-per-repo" id="toc-fetch-datasets-per-repo" class="nav-link" data-scroll-target="#fetch-datasets-per-repo"><span class="header-section-number">3</span> Fetch datasets per repo</a>
  <ul class="collapse">
  <li><a href="#summary-of-datasets-per-repo" id="toc-summary-of-datasets-per-repo" class="nav-link" data-scroll-target="#summary-of-datasets-per-repo"><span class="header-section-number">3.1</span> Summary of datasets per repo</a></li>
  </ul></li>
  <li><a href="#write-sitemap.xml" id="toc-write-sitemap.xml" class="nav-link" data-scroll-target="#write-sitemap.xml"><span class="header-section-number">4</span> Write sitemap.xml</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Generate a datasets sitemap.xml for ODIS crawling</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>Goal</strong>: Generate <code>datasets/sitemap.xml</code> with datasets already in authoritative repositories with JSON-LD content for ODIS crawling.</p>
<ul>
<li>Tracking in Github issue(s):
<ul>
<li><a href="https://github.com/CalCOFI/workflows/issues/24">register datasets with ODIS (using JSON-LD) · Issue #24 · CalCOFI/workflows</a></li>
</ul></li>
<li>Techniques:
<ul>
<li>Use RESTful based APIs directly where possible. Avoid web scraping since most brittle to website changes. Avoid custom R packages (e.g., <a href="https://docs.ropensci.org/rerddap/"><code>rerddap</code></a> or <a href="https://github.com/DataONEorg/rdataone"><code>rdataone</code></a> for EDI) since have more R package dependencies, may be out of date and add unnecessary complexity.</li>
<li>Store CSV tables of repositories and datasets gleaned as snapshot in Github along with this report output as html.</li>
</ul></li>
</ul>
<section id="read-googlesheet-of-repos" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="read-googlesheet-of-repos"><span class="header-section-number">1</span> Read GoogleSheet of repos</h2>
<p>Columns from original GoogleSheet: - <code>repo</code>: repository name - <code>link</code>: url to repository</p>
<p>Extra columns added by this script: - <code>to_ds</code>: custom function to fetch datasets from repository - <code>status</code>: check if repository is accessible (<code>OK</code>) or not (<code>Not Found</code>); optionally set with <code>ck_status &lt;- T</code></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries ----</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>librarian<span class="sc">::</span><span class="fu">shelf</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  curl, dplyr, DT, here, httr2, glue, googlesheets4, janitor, knitr, purrr, </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  readr, stringr, tidyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">readr.show_col_types =</span> F)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># variables ----</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>d_gs      <span class="ot">&lt;-</span> <span class="st">"https://docs.google.com/spreadsheets/d/1uhviF2ecfOqGaSbC_JE8B5jPRqqjMaFc9TNCK_m297c/edit?gid=1271784325#gid=1271784325"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>d_csv     <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/repo_links.csv"</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>ds_csv    <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/repo_datasets.csv"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>sm_xml    <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/sitemap.xml"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>ck_status <span class="ot">&lt;-</span> F</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># helper functions ----</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>erddap_ds <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># link = d$link[3]</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> link <span class="sc">|&gt;</span> </span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="fu">fixed</span>(<span class="st">"index.html"</span>), <span class="fu">fixed</span>(<span class="st">"index.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>      Accessible <span class="sc">==</span> <span class="st">"public"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">pfx =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(tabledap),</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        tabledap,</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        griddap),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"{pfx}.html"</span>))</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  ds <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> Title, url)</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ds, <span class="st">"datasets"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  ds</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>edi_ds <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># link = d$link[2]</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  u <span class="ot">&lt;-</span> <span class="fu">url_parse</span>(link)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>  u<span class="sc">$</span>path  <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(u<span class="sc">$</span>path, <span class="st">"simpleSearch"</span>, <span class="st">"downloadSearch"</span>)</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  u<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">q =</span> <span class="fu">paste</span>(<span class="fu">names</span>(u<span class="sc">$</span>query), u<span class="sc">$</span>query, <span class="at">sep =</span> <span class="st">"="</span>, <span class="at">collapse =</span> <span class="st">"&amp;"</span>))</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     curl_escape(httr2:::query_build(u$query)))</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">url_build</span>(u)) <span class="sc">|&gt;</span> </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://portal.edirepository.org/nis/mapbrowse?packageid={packageid}"</span>))</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  ds <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> </span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(title, url)</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ds, <span class="st">"datasets"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>  ds</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a><span class="co"># read googlesheet repos ----</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">dirname</span>(d_csv), <span class="at">showWarnings =</span> F)</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_deauth</span>()</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="fu">read_sheet</span>(d_gs) <span class="sc">|&gt;</span> </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(d_csv)</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(d_csv) <span class="sc">|&gt;</span> </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> <span class="co"># for now, simply translates to lower case</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">to_ds =</span> <span class="fu">map_chr</span>(</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>      link, </span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>      \(link){</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>        <span class="fu">case_when</span>(</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>          <span class="fu">str_detect</span>(link, <span class="st">"erddap"</span>)        <span class="sc">~</span> <span class="st">"erddap_ds(link)"</span>,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>          <span class="fu">str_detect</span>(link, <span class="st">"edirepository"</span>) <span class="sc">~</span> <span class="st">"edi_ds(link)"</span>,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>          <span class="at">.default =</span> <span class="cn">NA</span>) } ) )</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (ck_status){</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">status =</span> <span class="fu">map_chr</span>(</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>        link, </span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>        \(x){</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>          <span class="fu">request</span>(x) <span class="sc">|&gt;</span> </span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>            <span class="fu">resp_status_desc</span>() } ) )</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a><span class="co"># write repos to csv ----</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(repo, link) <span class="sc">|&gt;</span> </span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(d_csv)</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a><span class="co"># show repos ----</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">link   =</span> <span class="fu">glue</span>(<span class="st">"&lt;a href='{link}' target='_blank'&gt;{link}&lt;/a&gt;"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> F,</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom =</span> <span class="st">"ft"</span>,</span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength =</span> <span class="fu">nrow</span>(d)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-8fb6df6ca362d39df41d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8fb6df6ca362d39df41d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11"],["ERRDAP - oceanview","EDI","ERRDAP-coastwatch","ZooDB","ZooScan","CalCOFI website (METS)","CalCOFI website (CTD casts)","CalCOFI Trawl data","Stanford CalCOFI zooplankton data","Stanford CalCOFI phytoplankton data","IFCB"],["<a href='https://oceanview.pfeg.noaa.gov/erddap/search/index.html?page=1&itemsPerPage=1000&searchFor=seabird+CalCOFI' target='_blank'>https://oceanview.pfeg.noaa.gov/erddap/search/index.html?page=1&itemsPerPage=1000&searchFor=seabird+CalCOFI<\/a>","<a href='http://portal.edirepository.org:80/nis/simpleSearch?defType=edismax&q=CalCOFI&fq=-scope:ecotrends&fq=-scope:lter-landsat*&fl=id,packageid,title,author,organization,pubdate,coordinates&debug=false' target='_blank'>http://portal.edirepository.org:80/nis/simpleSearch?defType=edismax&q=CalCOFI&fq=-scope:ecotrends&fq=-scope:lter-landsat*&fl=id,packageid,title,author,organization,pubdate,coordinates&debug=false<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/search/index.html?page=1&itemsPerPage=1000&searchFor=CalCOFI' target='_blank'>https://coastwatch.pfeg.noaa.gov/erddap/search/index.html?page=1&itemsPerPage=1000&searchFor=CalCOFI<\/a>","<a href='http://oceaninformatics.ucsd.edu/zoodb/' target='_blank'>http://oceaninformatics.ucsd.edu/zoodb/<\/a>","<a href='https://oceaninformatics.ucsd.edu/zooscandb/secure/login.php' target='_blank'>https://oceaninformatics.ucsd.edu/zooscandb/secure/login.php<\/a>","<a href='https://calcofi.org/data/oceanographic-data/underway/' target='_blank'>https://calcofi.org/data/oceanographic-data/underway/<\/a>","<a href='https://calcofi.org/data/oceanographic-data/ctd-cast-files/' target='_blank'>https://calcofi.org/data/oceanographic-data/ctd-cast-files/<\/a>","<a href='https://library.ucsd.edu/dc/object/bb9217084g' target='_blank'>https://library.ucsd.edu/dc/object/bb9217084g<\/a>","<a href='https://purl.stanford.edu/nt620vn7810' target='_blank'>https://purl.stanford.edu/nt620vn7810<\/a>","<a href='https://searchworks.stanford.edu/view/pz376rp0413' target='_blank'>https://searchworks.stanford.edu/view/pz376rp0413<\/a>","<a href='https://data.caloos.org/#module-metadata/9914a1f7-ba36-4a26-9d0b-86032739019c/c9367c0a-f7dc-4c2f-90fb-dc69567cf3b3' target='_blank'>https://data.caloos.org/#module-metadata/9914a1f7-ba36-4a26-9d0b-86032739019c/c9367c0a-f7dc-4c2f-90fb-dc69567cf3b3<\/a>"],["erddap_ds(link)","edi_ds(link)","erddap_ds(link)",null,null,null,null,null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>repo<\/th>\n      <th>link<\/th>\n      <th>to_ds<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"dom":"ft","pageLength":11,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"repo","targets":1},{"name":"link","targets":2},{"name":"to_ds","targets":3}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[10,11,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<ul>
<li>source: <a href="https://docs.google.com/spreadsheets/d/1uhviF2ecfOqGaSbC_JE8B5jPRqqjMaFc9TNCK_m297c/edit?gid=1271784325#gid=1271784325">Living program document: CalCOFI Data Inventory_updated Oct2024 - Google Sheets</a></li>
</ul>
</section>
<section id="issues" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="issues"><span class="header-section-number">2</span> Issues</h2>
<ul>
<li>GoogleSheet typo under <code>repo</code>: “ER<strong>R</strong>DAP” -&gt; “ER<strong>D</strong>DAP”</li>
<li>Repositories require login:
<ul>
<li><a href="http://oceaninformatics.ucsd.edu/zoodb/">ZooDB</a></li>
<li><a href="https://oceaninformatics.ucsd.edu/zooscandb/secure/login.php">ZooScan</a></li>
</ul></li>
<li>TODO: other repositories</li>
</ul>
</section>
<section id="fetch-datasets-per-repo" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="fetch-datasets-per-repo"><span class="header-section-number">3</span> Fetch datasets per repo</h2>
<p>Always return a data frame with columns:</p>
<ul>
<li><code>title</code>: title of dataset</li>
<li><code>url</code>: url to dataset</li>
</ul>
<p>And attach the original data frame as an attribute <code>datasets</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fetch datasets per repo ----</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(to_ds)) <span class="sc">|&gt;</span> <span class="co"># View()</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ds =</span> <span class="fu">map2</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>      to_ds, link,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>      \(to_ds, link){</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> to_ds)) } ) ) <span class="sc">|&gt;</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(ds)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># write datasets to csv ----</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>datasets <span class="sc">|&gt;</span> </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(ds_csv)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co"># show datasets ----</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>datasets<span class="sc">|&gt;</span> </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">dataset =</span> <span class="fu">glue</span>(<span class="st">"&lt;a href='{url}' target='_blank'&gt;{title}&lt;/a&gt;"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(repo, dataset) <span class="sc">|&gt;</span> </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6d5ac3a8e2e7bf521fba" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6d5ac3a8e2e7bf521fba">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77"],["ERRDAP - oceanview","ERRDAP - oceanview","ERRDAP - oceanview","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","EDI","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch","ERRDAP-coastwatch"],["<a href='https://oceanview.pfeg.noaa.gov/erddap/tabledap/CAC_FI_SBAS_obs.html' target='_blank'>Farallon Institute CalCOFI Seabirds: Observations<\/a>","<a href='https://oceanview.pfeg.noaa.gov/erddap/tabledap/CAC_FI_SBAS_tr.html' target='_blank'>Farallon Institute CalCOFI Seabirds: Transect Log<\/a>","<a href='https://oceanview.pfeg.noaa.gov/erddap/tabledap/cciea_B_AS_DENS.html' target='_blank'>Seabird at-sea density anomaly<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.17.4' target='_blank'>Cruise measurements (temperature, salinity, density, chlorophyll, C14, phosphate, silicate, nitrate, nitrite) collected from CTD casts aboard CalCOFI cruises in the California Current, and averaged annually and by cruise, from 1984 - 2019 (updated periodically).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.78.5' target='_blank'>Measurements from CalCOFI cruises in the California Current System, including log of station information, weather, sea conditions as well as physical, chemical and biological measurements including including temperature, salinity, oxygen, density, sigma theta, phosphate, silicate, nitrite, nitrate, ammonia, chlorophyll a, integrated chlorophyll a, primary productivity, and integrated primary production. 1949 - January 2020<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=edi.109.4' target='_blank'>CALCOFI fish larvae at 66 standard stations, 1966 - ongoing<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.183.2' target='_blank'>Index of visual monitoring efforts, weather conditions and position updates from CalCOFI cruises in the California Current System, 2008 - 2009. This dataset has been superseded by knb-lter-cce.262.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.155.3' target='_blank'>Assembled file of spring annual averages of abundance of selected euphausiids from the Southern California region, 1951 - 2011.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.172.3' target='_blank'>Assembled file of spring annual averages of abundance of five species of cool regime salps from the Southern California region, 1951 - 2011.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.184.2' target='_blank'>Index of visual monitoring, location, species behavior, and identification from CalCOFI cruises in the California Current System, 2008 - 2009. This dataset has been superseded by knb-lter-cce.262.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.262.2' target='_blank'>Index of visual monitoring, location, species behavior, and identification of cetaceans from CalCOFI cruises in the California Current System, 2005-2015 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.113.4' target='_blank'>Size fractionation for total Chl a within the surface layer and calculated size distribution of total Chl a from discrete bottle samples from CCE-CalCOFI Augmented Cruises in the California Current System, 2004 - 2017 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.170.2' target='_blank'>Assembled file of spring annual averages of measures of total mesozooplankton organic biomass as carbon, in the California Current System, 1951 - 2008.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.279.3' target='_blank'>Station data of passive and active fluorescence measurements of chlorophyll-a (Chl), phycoerythrin (PE), chromophoric dissolved organic matter (CDOM), and variable fluorescence (Fv/Fm)  from CCE-CalCOFI Augmented cruises in the California Current System, 2012 - October 2020.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.171.4' target='_blank'>Assembled file of spring annual averages of pelagic tunicate organic biomass as carbon from the Southern California region, 1951 - 2011.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.54.7' target='_blank'>Particulate organic carbon and nitrogen measurements at selected depths in the water column from CalCOFI-CCE Augmented cruises in the California Current System, 2004 - July 2020.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.281.3' target='_blank'>Continuous passive and active fluorescence measurements of chlorophyll-a (Chl), phycoerythrin (PE), chromophoric dissolved organic matter (CDOM), and variable fluorescence (Fv/Fm) from CCE-CalCOFI Augmented cruises in the California Current System, 2012 - 2020<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.313.1' target='_blank'>California Current Ecosystem Euphausiid data, Brinton and Townsend Euphausiid Database (BTEDB)<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.162.3' target='_blank'>Seasonal seabird density and richness of seabirds off Southern California from sampling aboard California Cooperative Oceanic Fisheries Investigations (CalCOFI) cruises, 1987 - 2006.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.164.2' target='_blank'>Seasonal seabird density by species and seasonal density anomaly for four seabird species off Southern California from from sampling aboard California Cooperative Oceanic Fisheries Investigations (CalCOFI) cruises, 1987 - 2006.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.21.3' target='_blank'>Measurements of dissolved inorganic concentrations of nutrient iron and of iron limitation at selected stations and depths from CalCOFI cruises in the California Current System, Nov. 2002 - July 2004 (completed)<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.57.3' target='_blank'>Size group (pico, nano, micro) and group total carbon estimates from cell counts via epifluorescent microscopy (EPI) of heterotrophic and autotrophic plankton from CCE-CalCOFI Augmented cruises in the California Current System, 2004 - 2011 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.119.5' target='_blank'>Size fractionation for total Chl a within the surface layer and calculated size distribution of total Chl a from discrete bottle samples collected during CCE LTER process cruises in the CCE region, 2006 - 2017 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.194.6' target='_blank'>Picophytoplankton and bacteria total carbon estimates from cell counts analyzed with flow cytometry (FCM) from CCE-CalCOFI Augmented cruises in the California Current System, 2004 - 2019 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.255.3' target='_blank'>Bird and mammal observations aboard CalCOFI (1987-2021, ongoing), NMFS (1996-2021, ongoing) and CPR (2003-2006, completed) cruises.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.159.6' target='_blank'>Picophytoplankton and bacteria abundances analyzed with flow cytometry (FCM) from CCE-CalCOFI Augmented cruises in the California Current System, 2004 - 2019 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.188.4' target='_blank'>Data pertaining to lobster phyllosoma, Panulirus interruptus, collection methods, locations, identification and staging (1951-2008, months of July and August)<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.253.2' target='_blank'>Total dissolved organic carbon measurements at standard depths in the water column from nine CalCOFI cruises, 2008-2010.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.152.2' target='_blank'>Mean annual Secchi depth measurements in the period starting in 1969 provide a measure of water column transparency in the CalCOFI inshore and offshore areas, 1969 - 2004.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.319.1' target='_blank'>The co-occurrence of MHW characteristics and in situ sampling from CCE-CalCOFI Augmented Cruises in the California Current System,1983~2021<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.58.3' target='_blank'>Cell counts (per liter) by size groups of diatoms, autotrophic and heterotrophic plankton, via epifluorescent microscopy (EPI) from CCE-CalCOFI Augmented cruises in the California Current System, 2004 - 2011 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.316.1' target='_blank'>High Performance Liquid Chromatography (HPLC) pigment analysis from rosette bottle samples at various depths from CalCOFI-CCE Augmented cruises in the California Current System, 2002 to 2023 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.284.2' target='_blank'>Nitrogen and oxygen stable isotopes of nitrate from CalCOFI lines 80 and 93 plus station 081.8 046.9. Collected on cruises from 2010 to 2016.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.254.4' target='_blank'>Temporal and spatial changes of the abundance and species composition of phytoplankton in the California Current from samples collected aboard CalCOFI cruises from summer 1996 through 2022.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.249.3' target='_blank'>Size fractionation of total Chl a larger and smaller than 8 μm data generated by Mike Mullin of the Marine Life Research Group, aboard CalCOFI (California Cooperative Oceanic Fisheries Investigations) cruises of the coast of California, January 1994 - October 1996.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.314.1' target='_blank'>Secchi disk depth (ZSD) measurements in the California Current 1949-2021<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.312.2' target='_blank'>Dry weight biomass measurements of net-collected mesozooplankton. Samples collected in\n      the CCE-LTER region on Process Cruises from 2006 to the present. Summaries for each Lagrangian\n      Cycle.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.176.6' target='_blank'>Water column primary production per day integrated over the euphotic zone from CCE LTER process cruises in the California Current System, 2006 - 2021 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.180.4' target='_blank'>Size group (pico, nano, micro) and group total carbon estimates from cell counts via epifluorescent microscopy (EPI) of heterotrophic and autotrophic plankton from CCE LTER process cruises in the California Current region, 2006 - 2016<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.283.1' target='_blank'>Chl a from discrete bottles samples from the Cal Poly Pier, 2017-present.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.76.4' target='_blank'>Picophytoplankton and bacteria total carbon estimates from cell counts analyzed with flow cytometry (FCM) from CCE LTER process cruises in the California Current region, 2006 - 2017.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.71.6' target='_blank'>Primary production estimates from 14C uptake (in situ), determined by the incorporation of inorganic carbon into particulate organic carbon (POC) due to photosynthesis at selected light levels from CCE LTER process cruises in the California Current System, 2006 - 2021 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.55.4' target='_blank'>Picophytoplankton and bacteria abundances analyzed with flow cytometry (FCM) from CCE LTER process cruises the California Current region, 2006 - 2017.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.72.4' target='_blank'>High Performance Liquid Chromatography (HPLC) pigment analysis from rosette bottle samples at various depths from CCE LTER process cruises in the California Current System, 2006 to 2017.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.104.12' target='_blank'>Particulate organic carbon and nitrogen measurements at selected depths in the water column in the CCE region since 2006 - 2021 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.277.1' target='_blank'>Picoplankton and Bacteria Abundance analyzed with flow cytometry (FCM) collected aboard student cruises, SKrillEx I (2014), SKrillEx II (2015), and Falkor (2013).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.311.2' target='_blank'>Gut Fluorescence measurements of mesozooplankton grazing on autotrophic prey. Samples collected in the CCE-LTER region on Process Cruises from 2006 to the present. Summaries for each Lagrangian Cycle.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.179.4' target='_blank'>Cell counts (per liter) by size groups of diatoms, autotrophic and heterotrophic plankton, via epifluorescent microscopy (EPI) from CCE LTER process cruises in the California Current region, 2006 - 2016.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.20.6' target='_blank'>Total dissolved organic carbon and nitrogen measurements at selected depths in the water column from CCE LTER process cruises in the California Current System, 2006 - 2021 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.292.1' target='_blank'>Three ~50m vertical profiles of the dissolved O2/Ar ion current ratio in seawater with depth, measured at high vertical resolution using Membrane Inlet Mass Spectrometry. 2017.<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-hfr.170.12' target='_blank'>Thresholds and Regime Shifts at Four LTER Sites (CCE, JRN, PAL, SBC) 1951-2009<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.62.7' target='_blank'>Exported particulate carbon and nitrogen measurements from 4-day sediment trap deployments in the CCE region, 2007 - 2019 (ongoing).<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=edi.1769.1' target='_blank'>Salinity is diagnostic of maximum potential chlorophyll and phytoplankton community structure in an Eastern Boundary Upwelling System<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.172.2' target='_blank'>Estimates of nitrogen and phosphorus excretion rates in individual marine and estuarine animals<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.162.1' target='_blank'>SBC LTER: Reef: California kelp canopy and environmental variable dynamics<\/a>","<a href='https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.56.4' target='_blank'>SBC LTER: Reef: Feeding relationships for kelp forest species<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFINOAAhydros.html' target='_blank'>CalCOFI NOAA  Additional CTD<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIcufes.html' target='_blank'>CalCOFI NOAA Continuous Underway Fish-Egg Sampler<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIcruises.html' target='_blank'>CalCOFI NOAA Cruises<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIeggcnt.html' target='_blank'>CalCOFI NOAA Fish Egg Counts<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIeggstg.html' target='_blank'>CalCOFI NOAA Fish Egg Stages<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvcnt.html' target='_blank'>CalCOFI NOAA Fish Larvae Counts<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvsiz.html' target='_blank'>CalCOFI NOAA Fish Larvae Sizes<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvstg.html' target='_blank'>CalCOFI NOAA Fish Larvae Stages<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFItowtyp.html' target='_blank'>CalCOFI NOAA Ichthyoplankton Tow Types<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFItows.html' target='_blank'>CalCOFI NOAA Ichthyoplankton Tows<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIinvsiz.html' target='_blank'>CalCOFI NOAA Invertebrate Sizes<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIinvcnt.html' target='_blank'>CalCOFI NOAA Invertebrates<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIstns.html' target='_blank'>CalCOFI NOAA Stations<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIzoovol.html' target='_blank'>CalCOFI NOAA Zooplankton Volume<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/siocalcofiHydroBottle.html' target='_blank'>CalCOFI SIO Hydrographic Bottle Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/siocalcofiHydroCast.html' target='_blank'>CalCOFI SIO Hydrographic Cast Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FED_Rockfish_Catch.html' target='_blank'>Rockfish Recruitment and Ecosystem Assessment Survey, Catch Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHLengthFrequency.html' target='_blank'>CPS Trawl Life History Length Frequency Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHSpecimen.html' target='_blank'>CPS Trawl Life History Specimen Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHHaulCatch.html' target='_blank'>CPS Trawl Life History Haul Catch Data<\/a>","<a href='https://coastwatch.pfeg.noaa.gov/erddap/griddap/FRD_CPS_SDMs.html' target='_blank'>CCS Species Distribution Models for coastal pelagic species<\/a>"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>repo<\/th>\n      <th>dataset<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"repo","targets":1},{"name":"dataset","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="summary-of-datasets-per-repo" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="summary-of-datasets-per-repo"><span class="header-section-number">3.1</span> Summary of datasets per repo</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tabulate datasets per repo ----</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datasets<span class="sc">$</span>repo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
               EDI ERRDAP - oceanview  ERRDAP-coastwatch 
                53                  3                 21 </code></pre>
</div>
</div>
</section>
</section>
<section id="write-sitemap.xml" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="write-sitemap.xml"><span class="header-section-number">4</span> Write sitemap.xml</h2>
<ul>
<li><a href="https://developers.google.com/search/docs/crawling-indexing/sitemaps/build-sitemap">Build and Submit a Sitemap | Google Search Documentation</a></li>
<li><a href="https://www.sitemaps.org/protocol.html">Protocol | sitemaps.org</a><br>

<ul>
<li><code>loc</code>: dataset link</li>
<li><code>lastmod</code>: today’s date<br>
TODO: change to dataset’s last modified date</li>
<li><code>changefreq</code>: SKIP; valid values: always, hourly, daily, weekly, monthly, yearly, never</li>
<li><code>priority</code>: SKIP; valid values: 0 to 1, e.g.&nbsp;0.8</li>
</ul></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write sitemap.xml ----</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(ds_csv)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>sm_body <span class="ot">&lt;-</span> datasets <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glue_data</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"&lt;url&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;loc&gt;{url}&lt;/loc&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;lastmod&gt;{Sys.Date()}&lt;/lastmod&gt;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/url&gt;"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">write_lines</span>(</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">'</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="st">        &lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;'</span>), </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    sm_body, </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/urlset&gt;'</span>), </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> sm_xml)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Datasets</strong> <code>sitemap.xml</code>:</p>
<ul>
<li><a href="https://calcofi.io/workflows/datasets/sitemap.xml"><code>calcofi.io/workflows/datasets/sitemap.xml</code></a></li>
</ul>
<p>Contents of <code>sitemap.xml</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">"1.0"</span><span class="ot"> encoding=</span><span class="st">"UTF-8"</span><span class="fu">?&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">urlset</span><span class="ot"> xmlns=</span><span class="st">"http://www.sitemaps.org/schemas/sitemap/0.9"</span>&gt;</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://oceanview.pfeg.noaa.gov/erddap/tabledap/CAC_FI_SBAS_obs.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://oceanview.pfeg.noaa.gov/erddap/tabledap/CAC_FI_SBAS_tr.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://oceanview.pfeg.noaa.gov/erddap/tabledap/cciea_B_AS_DENS.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.17.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.78.5&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=edi.109.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.183.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.155.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.172.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.184.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.262.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.113.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.170.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.279.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.171.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.54.7&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.281.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.313.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.162.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.164.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.21.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.57.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.119.5&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.194.6&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.255.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.159.6&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.188.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.253.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.152.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.319.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.58.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.316.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.284.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.254.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.249.3&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.314.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.312.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.176.6&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.180.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.283.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.76.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.71.6&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.55.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.72.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.104.12&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.277.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.311.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.179.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.20.6&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.292.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-hfr.170.12&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-cce.62.7&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=edi.1769.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.172.2&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.162.1&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://portal.edirepository.org/nis/mapbrowse?packageid=knb-lter-sbc.56.4&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFINOAAhydros.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIcufes.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIcruises.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIeggcnt.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIeggstg.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvcnt.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvsiz.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIlrvstg.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFItowtyp.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFItows.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIinvsiz.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIinvcnt.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIstns.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/erdCalCOFIzoovol.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/siocalcofiHydroBottle.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/siocalcofiHydroCast.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-290"><a href="#cb6-290" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-291"><a href="#cb6-291" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FED_Rockfish_Catch.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHLengthFrequency.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHSpecimen.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/tabledap/FRDCPSTrawlLHHaulCatch.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">url</span>&gt;</span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">loc</span>&gt;https://coastwatch.pfeg.noaa.gov/erddap/griddap/FRD_CPS_SDMs.html&lt;/<span class="kw">loc</span>&gt;</span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a>  &lt;<span class="kw">lastmod</span>&gt;2024-10-22&lt;/<span class="kw">lastmod</span>&gt;</span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">url</span>&gt;</span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">urlset</span>&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb7" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Generate a datasets sitemap.xml for ODIS crawling"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    # number-offset:</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>**Goal**: Generate <span class="in">`datasets/sitemap.xml`</span> with datasets  already in authoritative repositories with JSON-LD content for ODIS crawling.</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Tracking in Github issue(s): </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="co">[</span><span class="ot">register datasets with ODIS (using JSON-LD) · Issue #24 · CalCOFI/workflows</span><span class="co">](https://github.com/CalCOFI/workflows/issues/24)</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Techniques:</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>Use RESTful based APIs directly where possible. Avoid web scraping since most brittle to website changes. Avoid custom R packages (e.g., <span class="co">[</span><span class="ot">`rerddap`</span><span class="co">](https://docs.ropensci.org/rerddap/)</span> or <span class="co">[</span><span class="ot">`rdataone`</span><span class="co">](https://github.com/DataONEorg/rdataone)</span> for EDI) since have more R package dependencies, may be out of date and add unnecessary complexity.</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span>Store CSV tables of repositories and datasets gleaned as snapshot in Github along with this report output as html.</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## Read GoogleSheet of repos</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>Columns from original GoogleSheet:</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`repo`</span>: repository name</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`link`</span>: url to repository</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>Extra columns added by this script:</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`to_ds`</span>: custom function to fetch datasets from repository</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`status`</span>: check if repository is accessible (<span class="in">`OK`</span>) or not (<span class="in">`Not Found`</span>); optionally set with <span class="in">`ck_status &lt;- T`</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="co"># libraries ----</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>librarian<span class="sc">::</span><span class="fu">shelf</span>(</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  curl, dplyr, DT, here, httr2, glue, googlesheets4, janitor, knitr, purrr, </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  readr, stringr, tidyr)</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">readr.show_col_types =</span> F)</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co"># variables ----</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>d_gs      <span class="ot">&lt;-</span> <span class="st">"https://docs.google.com/spreadsheets/d/1uhviF2ecfOqGaSbC_JE8B5jPRqqjMaFc9TNCK_m297c/edit?gid=1271784325#gid=1271784325"</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>d_csv     <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/repo_links.csv"</span>)</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>ds_csv    <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/repo_datasets.csv"</span>)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>sm_xml    <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"datasets/sitemap.xml"</span>)</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>ck_status <span class="ot">&lt;-</span> F</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="co"># helper functions ----</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>erddap_ds <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># link = d$link[3]</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> link <span class="sc">|&gt;</span> </span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace</span>(<span class="fu">fixed</span>(<span class="st">"index.html"</span>), <span class="fu">fixed</span>(<span class="st">"index.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>      Accessible <span class="sc">==</span> <span class="st">"public"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>      <span class="at">pfx =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(</span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>        <span class="sc">!</span><span class="fu">is.na</span>(tabledap),</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>        tabledap,</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>        griddap),</span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"{pfx}.html"</span>))</span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  ds <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> </span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>      <span class="at">title =</span> Title, url)</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ds, <span class="st">"datasets"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>  ds</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>edi_ds <span class="ot">&lt;-</span> <span class="cf">function</span>(link){</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>  <span class="co"># link = d$link[2]</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>  u <span class="ot">&lt;-</span> <span class="fu">url_parse</span>(link)</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>  u<span class="sc">$</span>path  <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(u<span class="sc">$</span>path, <span class="st">"simpleSearch"</span>, <span class="st">"downloadSearch"</span>)</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>  u<span class="sc">$</span>query <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">q =</span> <span class="fu">paste</span>(<span class="fu">names</span>(u<span class="sc">$</span>query), u<span class="sc">$</span>query, <span class="at">sep =</span> <span class="st">"="</span>, <span class="at">collapse =</span> <span class="st">"&amp;"</span>))</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     curl_escape(httr2:::query_build(u$query)))</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">url_build</span>(u)) <span class="sc">|&gt;</span> </span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>      <span class="at">url =</span> <span class="fu">glue</span>(<span class="st">"https://portal.edirepository.org/nis/mapbrowse?packageid={packageid}"</span>))</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a>  ds <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> </span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(title, url)</span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(ds, <span class="st">"datasets"</span>) <span class="ot">&lt;-</span> x</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a>  ds</span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="co"># read googlesheet repos ----</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(<span class="fu">dirname</span>(d_csv), <span class="at">showWarnings =</span> F)</span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="fu">gs4_deauth</span>()</span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a><span class="fu">read_sheet</span>(d_gs) <span class="sc">|&gt;</span> </span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(d_csv)</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(d_csv) <span class="sc">|&gt;</span> </span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> <span class="co"># for now, simply translates to lower case</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>    <span class="at">to_ds =</span> <span class="fu">map_chr</span>(</span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>      link, </span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>      \(link){</span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>        <span class="fu">case_when</span>(</span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a>          <span class="fu">str_detect</span>(link, <span class="st">"erddap"</span>)        <span class="sc">~</span> <span class="st">"erddap_ds(link)"</span>,</span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>          <span class="fu">str_detect</span>(link, <span class="st">"edirepository"</span>) <span class="sc">~</span> <span class="st">"edi_ds(link)"</span>,</span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>          <span class="at">.default =</span> <span class="cn">NA</span>) } ) )</span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (ck_status){</span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>  d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>      <span class="at">status =</span> <span class="fu">map_chr</span>(</span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>        link, </span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a>        \(x){</span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>          <span class="fu">request</span>(x) <span class="sc">|&gt;</span> </span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>            <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a>            <span class="fu">resp_status_desc</span>() } ) )</span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a><span class="co"># write repos to csv ----</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(repo, link) <span class="sc">|&gt;</span> </span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(d_csv)</span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a><span class="co"># show repos ----</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> </span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a>    <span class="at">link   =</span> <span class="fu">glue</span>(<span class="st">"&lt;a href='{link}' target='_blank'&gt;{link}&lt;/a&gt;"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(</span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">escape =</span> F,</span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a>      <span class="at">dom =</span> <span class="st">"ft"</span>,</span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a>      <span class="at">pageLength =</span> <span class="fu">nrow</span>(d)))</span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>source: <span class="co">[</span><span class="ot">Living program document: CalCOFI Data Inventory\_updated Oct2024 - Google Sheets</span><span class="co">](`r d_gs`)</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a><span class="fu">## Issues</span></span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>GoogleSheet typo under <span class="in">`repo`</span>: "ER**R**DAP" -&gt; "ER**D**DAP"</span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Repositories require login:</span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="co">[</span><span class="ot">ZooDB</span><span class="co">]</span>(<span class="in">`r filter(d, repo == "ZooDB") |&gt; pull(link)`</span>)</span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="co">[</span><span class="ot">ZooScan</span><span class="co">]</span>(<span class="in">`r filter(d, repo == "ZooScan") |&gt; pull(link)`</span>)</span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>TODO: other repositories</span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fetch datasets per repo</span></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a>Always return a data frame with columns:</span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`title`</span>: title of dataset</span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`url`</span>: url to dataset</span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a>And attach the original data frame as an attribute <span class="in">`datasets`</span>.</span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a><span class="co"># fetch datasets per repo ----</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> </span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(to_ds)) <span class="sc">|&gt;</span> <span class="co"># View()</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a>    <span class="at">ds =</span> <span class="fu">map2</span>(</span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a>      to_ds, link,</span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a>      \(to_ds, link){</span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a>        <span class="fu">eval</span>(<span class="fu">parse</span>(<span class="at">text =</span> to_ds)) } ) ) <span class="sc">|&gt;</span> </span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(ds)</span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a><span class="co"># write datasets to csv ----</span></span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a>datasets <span class="sc">|&gt;</span> </span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(ds_csv)</span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a><span class="co"># show datasets ----</span></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a>datasets<span class="sc">|&gt;</span> </span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a>    <span class="at">dataset =</span> <span class="fu">glue</span>(<span class="st">"&lt;a href='{url}' target='_blank'&gt;{title}&lt;/a&gt;"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(repo, dataset) <span class="sc">|&gt;</span> </span>
<span id="cb7-174"><a href="#cb7-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">datatable</span>(<span class="at">escape =</span> F)</span>
<span id="cb7-175"><a href="#cb7-175" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-176"><a href="#cb7-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-177"><a href="#cb7-177" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary of datasets per repo</span></span>
<span id="cb7-178"><a href="#cb7-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-181"><a href="#cb7-181" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-182"><a href="#cb7-182" aria-hidden="true" tabindex="-1"></a><span class="co"># tabulate datasets per repo ----</span></span>
<span id="cb7-183"><a href="#cb7-183" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datasets<span class="sc">$</span>repo)</span>
<span id="cb7-184"><a href="#cb7-184" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-185"><a href="#cb7-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a><span class="fu">## Write sitemap.xml</span></span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Build and Submit a Sitemap | Google Search Documentation</span><span class="co">](https://developers.google.com/search/docs/crawling-indexing/sitemaps/build-sitemap)</span></span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Protocol | sitemaps.org</span><span class="co">](https://www.sitemaps.org/protocol.html)</span>\</span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="in">`loc`</span>: dataset link</span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="in">`lastmod`</span>: today's date\</span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a>     TODO: change to dataset's last modified date</span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="in">`changefreq`</span>: SKIP; valid values: always, hourly, daily, weekly, monthly, yearly, never</span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a><span class="ss">  * </span><span class="in">`priority`</span>: SKIP; valid values: 0 to 1, e.g. 0.8</span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a><span class="co"># write sitemap.xml ----</span></span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a>datasets <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(ds_csv)</span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a>sm_body <span class="ot">&lt;-</span> datasets <span class="sc">|&gt;</span></span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glue_data</span>(</span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a>    <span class="st">"&lt;url&gt;</span></span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;loc&gt;{url}&lt;/loc&gt;</span></span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;lastmod&gt;{Sys.Date()}&lt;/lastmod&gt;</span></span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a><span class="st">    &lt;/url&gt;"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a><span class="fu">write_lines</span>(</span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">'</span></span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a><span class="st">      &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span>
<span id="cb7-214"><a href="#cb7-214" aria-hidden="true" tabindex="-1"></a><span class="st">        &lt;urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"&gt;'</span>), </span>
<span id="cb7-215"><a href="#cb7-215" aria-hidden="true" tabindex="-1"></a>    sm_body, </span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a>    <span class="st">'&lt;/urlset&gt;'</span>), </span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> sm_xml)</span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a>**Datasets** <span class="in">`sitemap.xml`</span>: </span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">`calcofi.io/workflows/datasets/sitemap.xml`</span><span class="co">](https://calcofi.io/workflows/datasets/sitemap.xml)</span></span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a>Contents of <span class="in">`sitemap.xml`</span>:</span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a><span class="in">```xml</span></span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a>{{<span class="er">&lt;</span> include datasets/sitemap.xml &gt;}}</span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>